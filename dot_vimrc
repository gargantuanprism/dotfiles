set nocompatible
filetype off

call plug#begin()
Plug 'neoclide/coc.nvim', {'branch': 'release'}
call plug#end()

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'VundleVim/Vundle.vim'
Plugin 'othree/html5.vim'
Plugin 'vim-airline/vim-airline'
Plugin 'travisjeffery/vim-auto-mkdir'
Plugin 'pangloss/vim-javascript'
Plugin 'maxmellon/vim-jsx-pretty'
Plugin 'digitaltoad/vim-pug'
Plugin 'scrooloose/nerdtree'
Plugin 'nvie/vim-flake8'
Plugin 'gregsexton/MatchTag'
Plugin 'chriskempson/base16-vim'
Plugin 'Vimjas/vim-python-pep8-indent'
Plugin 'leafgarland/typescript-vim'
Plugin 'ctrlpvim/ctrlp.vim'
Plugin 'wincent/command-t'
" Plugin 'vim-jp/vim-cpp'
Plugin 'PeterRincker/vim-searchlight'
Plugin 'dense-analysis/ale'
Plugin 'lervag/vimtex'
Plugin 'junegunn/fzf'
Plugin 'junegunn/fzf.vim'
"Plugin 'catppuccin/vim'
Plugin 'Exafunction/windsurf.vim'
Plugin 'tpope/vim-commentary'
Plugin 'bfrg/vim-c-cpp-modern'
Plugin 'nathanaelkane/vim-indent-guides'
Plugin 'rafi/awesome-vim-colorschemes'
" Plugin 'fatih/vim-go'
Plugin 'charlespascoe/vim-go-syntax'
call vundle#end()

" mkdir is not exist
set dir=$HOME/.vim_tmp/swap
if !isdirectory(&dir) | call mkdir(&dir, 'p', 0700) | endif

syntax on
filetype indent plugin on

colorscheme base16-pop
" if filereadable(expand("~/.vimrc_background"))
"   let base16colorspace=256
"   source ~/.vimrc_background
" endif

autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
autocmd FileType js set omnifunc=htmlcomplete#CompleteTags

" disable auto-comment
autocmd FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o

" arduino
au BufRead,BufWrite *.ino set filetype=cpp

set termguicolors
set omnifunc=syntaxcomplete#Complete
set hlsearch
set incsearch
set ignorecase
set number
set expandtab
set tabstop=2
set shiftwidth=2
set softtabstop=2
set background=dark
set synmaxcol=1000
set wildmode=longest,list,full
set wildmenu
set backupcopy=yes
"set timeoutlen=100 ttimeoutlen=0
set backspace=indent,eol,start

let g:python_recommended_style = 0
let g:jsx_ext_required = 0
let g:ale_linters = {
      \   'javascript': ['standard'],
      \}
let g:ale_fixers = {'javascript': ['standard']}

if exists('+cc')
  set cc=80
endif

" Change dir to current file
if exists('+autochdir')
  set autochdir
else
  autocmd BufEnter * silent! lcd %:p:h:gs/ /\\ /
endif

command! Pudb :normal iimport pudb; pudb.set_trace()
command! Pdb :normal iimport pdb; pdb.set_trace()
command! Ipdb :normal iimport ipdb; ipdb.set_trace()
command! Killall bufdo bdelete
command! SudoSave :w !sudo tee %

" ctrl-j inserts a line break in normal mode
" i think this is emacs legacy
:nnoremap <NL> i<CR><ESC>

map <C-n> :NERDTreeToggle<CR>
noremap Q <Nop>

let g:ctrlp_cmd = 'CtrlPMixed'
let g:ctrlp_working_path_mode = '0'
let g:ctrlp_by_filename = 1
let g:ctrlp_regexp = 1
let g:ctrlp_custom_ignore = '\.git\|\.venv\|node_modules'

let g:fzf_vim = {}
map <C-\> :Files ~<CR>
"let g:fzf_vim.preview_window = ['right,50%', 'ctrl-\']

" let g:indent_guides_enable_on_vim_startup = 1
" imap <script><silent><nowait><expr> <C-g> codeium#Accept()
" imap <script><silent><nowait><expr> <C-h> codeium#AcceptNextWord()
" imap <script><silent><nowait><expr> <C-j> codeium#AcceptNextLine()
" imap <C-;>   <Cmd>call codeium#CycleCompletions(1)<CR>
" imap <C-,>   <Cmd>call codeium#CycleCompletions(-1)<CR>
" imap <C-x>   <Cmd>call codeium#Clear()<CR>

